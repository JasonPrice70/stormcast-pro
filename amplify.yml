version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci
        - |
          cat > vite.config.minimal.mjs << 'EOF'
          import { defineConfig } from 'vite';
          import react from '@vitejs/plugin-react';
          export default defineConfig({
            plugins: [react()],
            build: { outDir: 'dist' }
          });
          EOF
    build:
      commands:
        - npx vite build --config vite.config.minimal.mjs
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
